{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.module.ts","webpack:///./src/app/containers/app.component.ts","webpack:///./src/app/containers/components/canvas.ts","webpack:///./src/app/containers/components/index.ts","webpack:///./src/app/containers/components/material.module.ts","webpack:///./src/app/containers/index.ts","webpack:///./src/app/containers/sketch-diagram.container.ts","webpack:///./src/app/reducers/index.ts","webpack:///./src/app/reducers/sketch-diagram.reducer.ts","webpack:///./src/app/services/sketch-inference.service.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts","webpack:///jsdom (ignored)","webpack:///jsdom/lib/jsdom/living/generated/utils (ignored)","webpack:///jsdom/lib/jsdom/utils (ignored)","webpack:///xmldom (ignored)"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './containers/app.component';\nimport { StoreModule } from '@ngrx/store';\nimport { reducers, metaReducers } from './reducers';\nimport { StoreDevtoolsModule } from '@ngrx/store-devtools';\nimport { environment } from '../environments/environment';\nimport { SketchInferenceService } from './services/sketch-inference.service';\nimport { ContainerModule } from './containers';\n\n@NgModule({\n  imports: [\n    BrowserModule,\n    ContainerModule,\n    StoreModule.forRoot(reducers, { metaReducers }),\n    !environment.production ? StoreDevtoolsModule.instrument() : [],\n  ],\n  providers: [\n    SketchInferenceService\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { CanvasConfig, SketchCanvas } from './components/canvas';\nimport { SketchInferenceService } from '../services/sketch-inference.service';\nimport { Component, EventEmitter, SimpleChanges, OnChanges, OnInit, ElementRef } from '@angular/core';\nimport * as d3 from 'd3';\n\n\n// <mat-grid-tile colspan=\"1\" rowspan=\"1\">\n// <canvas id=\"debug-canvas\"></canvas>\n// </mat-grid-tile>\n@Component({\n  selector: 'sktd-root',\n  template: `\n  <mat-grid-list id=\"container\" cols=\"6\" rowHeight=\"fit\">\n    <mat-grid-tile colspan=\"5\" rowspan=\"2\">\n      <div class='sketch-diagram-container'>\n        <canvas id=\"sketch-diagram-canvas\"></canvas>\n      </div>\n    </mat-grid-tile>\n    <mat-grid-tile colspan=\"1\" rowspan=\"2\">\n      <button mat-raised-button (click)=\"predict()\">Predict</button>\n      {{prediction | json}}\n    </mat-grid-tile>\n  </mat-grid-list>\n  `,\n  styles: [`\n    #container {\n      height: 98vh;\n    }\n\n    .sketch-diagram-container {\n      width: 100%;\n      height: 100%\n    }\n\n    #sketch-diagram-canvas {\n      height: 100%;\n      width: 100%\n    }\n  `]\n})\nexport class AppComponent implements OnChanges, OnInit {\n  title = 'sketch-to-diagram';\n\n  private canvasConfig: CanvasConfig;\n  private canvas: SketchCanvas;\n  private prediction: any;\n\n  private debugCanvas;\n  private debugContext;\n\n  private pathEmitter: EventEmitter<[number, number]>;\n  constructor(private sketchInference: SketchInferenceService, private elementRef: ElementRef) {\n  }\n\n  ngOnChanges(c: SimpleChanges) {\n  }\n\n  ngOnInit() {\n    // this.debugCanvas = d3.select(this.elementRef.nativeElement).select('#debug-canvas').node();\n    // this.debugContext = this.debugCanvas.getContext('2d');\n    setTimeout(() => {\n      this.canvasConfig = {\n        container: d3.select(this.elementRef.nativeElement).select('#sketch-diagram-canvas'),\n        pathEmitter: this.pathEmitter\n      };\n      this.canvas = new SketchCanvas(this.canvasConfig);\n    });\n  }\n\n  predict() {\n    const bbox = this.canvas.getSketchBbox();\n    const imgData = this.canvas.getSketchImageData();\n\n    this.prediction = this.sketchInference.predict(imgData);\n    console.log(this.prediction);\n    this.canvas.clearSketch();\n\n  }\n\n}\n","import * as d3 from 'd3';\nimport { EventEmitter, Output } from '@angular/core';\nimport { fromEvent, Observable } from 'rxjs';\nimport { fabric } from 'Fabric';\n\nexport interface CanvasConfig {\n  container: d3.Selection<any, any, any, any>;\n  pathEmitter?: EventEmitter<[number, number]>;\n  backgroundColor?: string;\n}\n\nconst DiagramObject = fabric.util.createClass(fabric.Polygon, {\n  isDiagram: true,\n  initialize: (options = {}) => {\n    this.callSuper('initialize', options);\n  },\n\n  toObject: () => {\n    this.callSuper('toObject');\n  },\n\n  _render: (ctx) => {\n    this.callSuper('_render', ctx);\n  }\n});\n\nconst DiagramCircle = fabric.util.createClass(fabric.Circle, {\n  isDiagram: true,\n  initialize: (options = {}) => {\n    this.callSuper('initialize', options)\n  }\n})\n\nexport class SketchCanvas {\n  private diagramCanvas: fabric.Canvas;\n  private sketchCanvas: fabric.Canvas;\n  private canvasConfig: CanvasConfig;\n\n  private mouseMoveSource: Observable<any>;\n  private mouseUpSource: Observable<any>;\n  private mouseDownSource: Observable<any>;\n\n\n  constructor(canvasConfig: CanvasConfig) {\n    this.configureCanvas(canvasConfig);\n    const parentContainer = canvasConfig.container.node().parentNode.parentNode;\n    this.sketchCanvas.setDimensions({\n      width: parentContainer.offsetWidth,\n      height: parentContainer.offsetHeight\n    });\n    this.sketchCanvas.renderAll();\n  }\n\n  configureCanvas(canvasConfig: CanvasConfig) {\n    this.canvasConfig = canvasConfig;\n    this.sketchCanvas = new fabric.Canvas(canvasConfig.container.node(), {\n      backgroundColor: '#eaf0f9',\n      isDrawingMode: true,\n    });\n    this.sketchCanvas.freeDrawingBrush.color = 'black';\n    this.sketchCanvas.freeDrawingBrush.width = 4;\n\n    this.mouseMoveSource = fromEvent(this.sketchCanvas, 'mouse:move');\n    this.mouseDownSource = fromEvent(this.sketchCanvas, 'mouse:down');\n    this.mouseUpSource = fromEvent(this.sketchCanvas, 'mouse:up');\n  }\n\n  getSketchObjects() {\n    return this.sketchCanvas.getObjects('path');\n  }\n\n  getSketchBbox() {\n    const bbox = this.getSketchObjects().reduce((prev, curr) => {\n      const coords = curr.aCoords;\n      return {\n        minX: Math.min(prev.minX, coords.tl.x),\n        minY: Math.min(prev.minY, coords.tl.y),\n        maxX: Math.max(prev.maxX, coords.br.x),\n        maxY: Math.max(prev.maxY, coords.br.y)\n      };\n    }, {\n      minX: Number.MAX_SAFE_INTEGER,\n      minY: Number.MAX_SAFE_INTEGER,\n      maxX: 0,\n      maxY: 0\n    });\n    return bbox;\n  }\n\n  public getSketchImageData() {\n    const dpi = window.devicePixelRatio;\n    const bbox = this.getSketchBbox();\n    const context = this.sketchCanvas.getContext();\n    const imgData: ImageData = context.getImageData(\n      Math.max(bbox.minX - 10, 0) * dpi,\n      Math.max(bbox.minY - 10, 0) * dpi,\n      (bbox.maxX - bbox.minX + 20) * dpi,\n      (bbox.maxY - bbox.minY + 20) * dpi\n    );\n\n    return imgData;\n  }\n\n  public clearSketch() {\n    this.getSketchObjects().map(i => this.sketchCanvas.fxRemove(i));\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SktdMaterialModule } from './material.module';\n\n\nexport const COMPONENTS = [\n\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SktdMaterialModule\n  ],\n  declarations: COMPONENTS,\n  exports: COMPONENTS\n})\n\nexport class ComponentModule {}\n","import { NgModule } from '@angular/core';\nimport { MatGridListModule, MatButtonModule } from '@angular/material';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\n@NgModule({\n  imports: [\n    MatGridListModule,\n    MatButtonModule,\n    BrowserAnimationsModule,\n  ],\n  exports: [\n    MatGridListModule,\n    MatButtonModule\n  ],\n})\nexport class SktdMaterialModule { }\n","import { SktdMaterialModule } from './components/material.module';\nimport { AppComponent } from './app.component';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { SketchDiagramComponent } from './sketch-diagram.container';\nimport { ComponentModule } from './components';\n\n\nexport const CONTAINERS = [\n  AppComponent,\n  SketchDiagramComponent\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ComponentModule,\n    SktdMaterialModule\n  ],\n  declarations: CONTAINERS,\n  exports: CONTAINERS\n})\n\nexport class ContainerModule {}\n","import { CanvasConfig, SketchCanvas } from './components/canvas';\nimport { Component, ChangeDetectionStrategy, ElementRef, SimpleChanges, OnChanges, OnInit, Output, EventEmitter } from '@angular/core';\nimport * as d3 from 'd3';\n\n@Component({\n  selector: 'sktd-sketch-diagram',\n  template: `\n    <div id=\"sketch-diagram-canvas\"></div>\n  `,\n  styles: [`\n    #sketch-diagram-canvas {\n      height: 100%;\n      width: 100%\n    }\n  `],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SketchDiagramComponent implements OnChanges, OnInit {\n\n  private canvasConfig: CanvasConfig;\n  private canvas: SketchCanvas;\n\n  @Output() pathEmitter: EventEmitter<[number, number]> = new EventEmitter();\n\n  constructor(private elementRef: ElementRef) {}\n\n  render() {\n    d3.select(this.elementRef.nativeElement).select('#sketch-diagram-canvas').select('*').remove();\n    this.canvasConfig = {\n      container: d3.select(this.elementRef.nativeElement).select('#sketch-diagram-canvas'),\n      pathEmitter: this.pathEmitter\n    };\n    this.canvas = new SketchCanvas(this.canvasConfig);\n  }\n\n  ngOnInit() {\n    setTimeout(() => {\n      this.render();\n    });\n  }\n\n  ngOnChanges(c: SimpleChanges) {\n    setTimeout(() => {\n      this.render();\n    });\n  }\n}\n","import {\n  ActionReducer,\n  ActionReducerMap,\n  createFeatureSelector,\n  createSelector,\n  MetaReducer\n} from '@ngrx/store';\nimport { environment } from '../../environments/environment';\nimport * as fromSketchDiagram from './sketch-diagram.reducer';\n\nexport interface State {\n\n  sketchDiagram: fromSketchDiagram.State;\n}\n\nexport const reducers: ActionReducerMap<State> = {\n\n  sketchDiagram: fromSketchDiagram.reducer,\n};\n\n\nexport const metaReducers: MetaReducer<State>[] = !environment.production ? [] : [];\n","import { Action } from '@ngrx/store';\n\n\nexport interface State {\n  \n}\n\nexport const initialState: State = {\n\n};\n\nexport function reducer(state = initialState, action: Action): State {\n  switch (action.type) {\n\n    default:\n      return state;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { from, Subject } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { loadModel, Model, fromPixels, image, scalar, Rank, Tensor, tidy, zeros } from '@tensorflow/tfjs';\nimport * as d3 from 'd3';\n\n@Injectable()\nexport class SketchInferenceService {\n  private IMAGE_DIMENSION: [number, number] = [28, 28];\n  private model: Model;\n  private classes: {[id: string]: string};\n\n  constructor() {\n    console.log('Loading Model');\n    from(d3.json('/assets/class_names.json')).subscribe((d: {[id: string]: string}) => {\n      this.classes = d;\n    });\n\n    from(loadModel('/assets/model.json')).subscribe(m => {\n      this.model = m;\n      console.log('Model Succesfully Loaded', this.model);\n    });\n  }\n\n  preprocess(imgData): Tensor<Rank> {\n    return tidy(() => {\n      const tensor = fromPixels(imgData, 1);\n      const resized = image.resizeBilinear(tensor, [28, 28]).toFloat();\n      const offset = scalar(255.0);\n      const normalized = scalar(1.0).sub(resized.div(offset));\n      const batched = normalized.expandDims(0);\n      return batched;\n    });\n  }\n\n  predict(imgData): [string, number][] {\n    const preprocessed = this.preprocess(imgData);\n    const prediction = <Float32Array>(this.model.predict(preprocessed) as Tensor).dataSync();\n    const results = [];\n\n    prediction.forEach((v, i) => {\n      results.push([this.classes[i], v]);\n    });\n\n    console.log(results);\n\n    const topPrediction = results.reduce((prev, curr) => {\n      if (prev) {\n        if (curr[1] > prev[1]) {\n          return curr;\n        } else {\n          return prev;\n        }\n      } else {\n        return curr;\n      }\n    });\n\n    return topPrediction;\n    // return results;\n  }\n\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * In development mode, to ignore zone related error stack frames such as\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\n * import the following file, but please comment it out in production mode\n * because it will have performance impact when throw error\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"sourceRoot":""}